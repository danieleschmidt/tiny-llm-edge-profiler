# Generation 4 Quantum Leap Production Deployment Configuration
# Comprehensive global deployment for edge AI profiling platform

apiVersion: v1
kind: ConfigMap
metadata:
  name: quantum-profiler-config
  namespace: edge-ai-profiling
  labels:
    app: tiny-llm-profiler
    version: "0.4.0"
    generation: "4-quantum-leap"
    environment: production

data:
  # Global Configuration
  global_config.yaml: |
    application:
      name: "Tiny LLM Edge Profiler"
      version: "0.4.0"
      generation: "4-quantum-leap"
      deployment_mode: "global"
      
    # Quantum-Inspired Optimization Configuration
    quantum_optimization:
      enabled: true
      method: "quantum_annealing"
      qubits: 8
      annealing_schedule:
        initial_temperature: 1000.0
        final_temperature: 0.01
        iterations: 1000
      entanglement_matrix_size: 8
      coherence_time_ms: 1000.0
      
    # Neuromorphic Computing Configuration
    neuromorphic:
      enabled: true
      pattern: "spiking_neural_network"
      neurons: 256
      learning_rate: 0.01
      plasticity: "stdp"
      adaptation_rate: 0.01
      
    # Autonomous AI Learning Configuration
    ai_learning:
      enabled: true
      meta_learning:
        feature_dimension: 64
        adaptation_network_layers: [64, 32, 16]
        learning_rate: 0.001
      online_learning:
        memory_capacity: 1000
        elastic_weight_consolidation: true
        ewc_lambda: 1000.0
      multi_objective:
        population_size: 50
        generations: 100
        crossover_rate: 0.8
        mutation_rate: 0.1
        
    # Global Deployment Configuration
    global_deployment:
      primary_region: "na-east"
      fallback_regions: ["eu-west", "ap-east"]
      edge_locations:
        - "na-east-1"
        - "na-west-1" 
        - "eu-west-1"
        - "eu-central-1"
        - "ap-east-1"
        - "ap-southeast-1"
        - "ap-south-1"
        - "sa-east-1"
      auto_failover: true
      health_check_interval_seconds: 30
      
    # Internationalization Configuration
    i18n:
      default_language: "en"
      supported_languages:
        - "en"    # English
        - "zh-CN" # Chinese Simplified
        - "zh-TW" # Chinese Traditional
        - "ja"    # Japanese
        - "ko"    # Korean
        - "es"    # Spanish
        - "fr"    # French
        - "de"    # German
        - "ru"    # Russian
        - "pt"    # Portuguese
        - "it"    # Italian
        - "ar"    # Arabic
        - "hi"    # Hindi
        - "th"    # Thai
        - "vi"    # Vietnamese
        - "id"    # Indonesian
      cultural_adaptation: true
      rtl_support: true
      
    # Compliance Configuration
    compliance:
      enabled: true
      regulations:
        gdpr:
          enabled: true
          data_retention_days: 90
          consent_required: true
          dpo_contact: "privacy@terragon.dev"
        ccpa:
          enabled: true
          data_retention_days: 365
          opt_out_rights: true
        pdpa:
          enabled: true
          data_retention_days: 365
          cross_border_restrictions: true
        lgpd:
          enabled: true
          data_retention_days: 180
          international_transfer_restrictions: true
          
    # Performance Configuration
    performance:
      quantum_optimization_timeout_seconds: 30
      neuromorphic_adaptation_timeout_seconds: 5
      ai_learning_timeout_seconds: 60
      global_routing_timeout_seconds: 10
      cache:
        multilevel_enabled: true
        l1_size_mb: 64
        l2_size_mb: 256
        l3_size_mb: 1024
        compression_enabled: true
        
    # Security Configuration
    security:
      encryption:
        algorithm: "AES-256-GCM"
        key_rotation_days: 30
      authentication:
        multi_factor_enabled: true
        session_timeout_minutes: 30
      rate_limiting:
        requests_per_minute: 1000
        burst_capacity: 200
      audit_logging:
        enabled: true
        retention_days: 365
        
    # Monitoring Configuration
    monitoring:
      metrics:
        enabled: true
        collection_interval_seconds: 15
        retention_days: 30
      alerting:
        enabled: true
        latency_threshold_ms: 500
        error_rate_threshold: 0.05
        availability_threshold: 0.99
      tracing:
        enabled: true
        sampling_rate: 0.1
        
    # Resource Limits
    resources:
      cpu_limit: "2000m"
      memory_limit: "4Gi"
      storage_limit: "20Gi"
      quantum_processing_threads: 4
      neuromorphic_processing_threads: 2
      ai_learning_threads: 8

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: quantum-profiler-api
  namespace: edge-ai-profiling
  labels:
    app: tiny-llm-profiler
    component: api-server
    generation: "4-quantum-leap"

spec:
  replicas: 3
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 2
      
  selector:
    matchLabels:
      app: tiny-llm-profiler
      component: api-server
      
  template:
    metadata:
      labels:
        app: tiny-llm-profiler
        component: api-server
        generation: "4-quantum-leap"
    spec:
      containers:
      - name: quantum-profiler
        image: terragon/tiny-llm-profiler:0.4.0-quantum-leap
        ports:
        - containerPort: 8080
          name: http-api
        - containerPort: 9090
          name: metrics
        - containerPort: 8000
          name: quantum-port
          
        env:
        - name: ENVIRONMENT
          value: "production"
        - name: LOG_LEVEL
          value: "INFO"
        - name: QUANTUM_OPTIMIZATION_ENABLED
          value: "true"
        - name: NEUROMORPHIC_ENABLED
          value: "true"
        - name: AI_LEARNING_ENABLED
          value: "true"
        - name: GLOBAL_DEPLOYMENT_ENABLED
          value: "true"
          
        resources:
          requests:
            cpu: "500m"
            memory: "1Gi"
          limits:
            cpu: "2000m"
            memory: "4Gi"
            
        livenessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          failureThreshold: 3
          
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
          initialDelaySeconds: 10
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 2
          
        volumeMounts:
        - name: config-volume
          mountPath: /app/config
        - name: quantum-data
          mountPath: /app/data/quantum
        - name: neuromorphic-data
          mountPath: /app/data/neuromorphic
        - name: ai-models
          mountPath: /app/models
          
      volumes:
      - name: config-volume
        configMap:
          name: quantum-profiler-config
      - name: quantum-data
        emptyDir:
          sizeLimit: "1Gi"
      - name: neuromorphic-data
        emptyDir:
          sizeLimit: "500Mi"
      - name: ai-models
        persistentVolumeClaim:
          claimName: ai-models-pvc

---
apiVersion: v1
kind: Service
metadata:
  name: quantum-profiler-service
  namespace: edge-ai-profiling
  labels:
    app: tiny-llm-profiler
    component: api-service

spec:
  type: ClusterIP
  ports:
  - port: 80
    targetPort: 8080
    protocol: TCP
    name: http
  - port: 9090
    targetPort: 9090
    protocol: TCP
    name: metrics
  - port: 8000
    targetPort: 8000
    protocol: TCP
    name: quantum
    
  selector:
    app: tiny-llm-profiler
    component: api-server

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: quantum-profiler-ingress
  namespace: edge-ai-profiling
  annotations:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/rate-limit-cpu: "1000"
    nginx.ingress.kubernetes.io/rate-limit-memory: "1000"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"

spec:
  tls:
  - hosts:
    - api.quantum-profiler.terragon.dev
    secretName: quantum-profiler-tls
    
  rules:
  - host: api.quantum-profiler.terragon.dev
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: quantum-profiler-service
            port:
              number: 80

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: ai-models-pvc
  namespace: edge-ai-profiling

spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: fast-ssd

---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: quantum-profiler-hpa
  namespace: edge-ai-profiling

spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: quantum-profiler-api
    
  minReplicas: 3
  maxReplicas: 20
  
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
  - type: Pods
    pods:
      metric:
        name: quantum_optimization_queue_length
      target:
        type: AverageValue
        averageValue: "10"

---
apiVersion: v1
kind: ServiceMonitor
metadata:
  name: quantum-profiler-metrics
  namespace: edge-ai-profiling
  labels:
    app: tiny-llm-profiler
    
spec:
  selector:
    matchLabels:
      app: tiny-llm-profiler
      component: api-service
      
  endpoints:
  - port: metrics
    interval: 15s
    path: /metrics
    
---
# Global Edge Location Configurations
apiVersion: v1
kind: ConfigMap
metadata:
  name: edge-locations-config
  namespace: edge-ai-profiling

data:
  edge_locations.yaml: |
    edge_locations:
      na-east-1:
        region: "North America East"
        city: "Ashburn"
        country: "USA"
        coordinates: [39.0458, -77.4874]
        platforms: ["x86_64", "arm64"]
        capacity_score: 0.85
        compliance: ["ccpa"]
        endpoint: "https://na-east-1.quantum-profiler.terragon.dev"
        
      na-west-1:
        region: "North America West" 
        city: "Palo Alto"
        country: "USA"
        coordinates: [37.4419, -122.1430]
        platforms: ["x86_64", "arm64"]
        capacity_score: 0.90
        compliance: ["ccpa"]
        endpoint: "https://na-west-1.quantum-profiler.terragon.dev"
        
      eu-west-1:
        region: "Europe West"
        city: "Dublin"
        country: "Ireland"
        coordinates: [53.3498, -6.2603]
        platforms: ["x86_64", "arm64"]
        capacity_score: 0.80
        compliance: ["gdpr"]
        endpoint: "https://eu-west-1.quantum-profiler.terragon.dev"
        
      eu-central-1:
        region: "Europe Central"
        city: "Frankfurt"
        country: "Germany"
        coordinates: [50.1109, 8.6821]
        platforms: ["x86_64", "arm64", "riscv64"]
        capacity_score: 0.88
        compliance: ["gdpr"]
        endpoint: "https://eu-central-1.quantum-profiler.terragon.dev"
        
      ap-east-1:
        region: "Asia Pacific East"
        city: "Tokyo"
        country: "Japan"
        coordinates: [35.6762, 139.6503]
        platforms: ["x86_64", "arm64"]
        capacity_score: 0.92
        compliance: []
        endpoint: "https://ap-east-1.quantum-profiler.terragon.dev"
        
      ap-southeast-1:
        region: "Asia Pacific Southeast"
        city: "Singapore"
        country: "Singapore"
        coordinates: [1.3521, 103.8198]
        platforms: ["x86_64", "arm64", "arm32"]
        capacity_score: 0.87
        compliance: ["pdpa"]
        endpoint: "https://ap-southeast-1.quantum-profiler.terragon.dev"
        
      ap-south-1:
        region: "Asia Pacific South"
        city: "Mumbai"
        country: "India"
        coordinates: [19.0760, 72.8777]
        platforms: ["x86_64", "arm64", "arm32"]
        capacity_score: 0.75
        compliance: []
        endpoint: "https://ap-south-1.quantum-profiler.terragon.dev"
        
      sa-east-1:
        region: "South America"
        city: "São Paulo"
        country: "Brazil"
        coordinates: [-23.5505, -46.6333]
        platforms: ["x86_64", "arm64"]
        capacity_score: 0.70
        compliance: ["lgpd"]
        endpoint: "https://sa-east-1.quantum-profiler.terragon.dev"

---
apiVersion: batch/v1
kind: CronJob
metadata:
  name: quantum-state-cleanup
  namespace: edge-ai-profiling

spec:
  schedule: "0 2 * * *"  # Daily at 2 AM
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: cleanup
            image: terragon/tiny-llm-profiler:0.4.0-quantum-leap
            command: ["/app/scripts/quantum-cleanup.sh"]
            resources:
              requests:
                cpu: "100m"
                memory: "128Mi"
              limits:
                cpu: "200m" 
                memory: "256Mi"
          restartPolicy: OnFailure

---
apiVersion: v1
kind: Secret
metadata:
  name: quantum-profiler-secrets
  namespace: edge-ai-profiling
  
type: Opaque
data:
  # Base64 encoded secrets (replace with actual values)
  database-password: cXVhbnR1bS1kYi1wYXNzd29yZA==
  redis-password: cXVhbnR1bS1yZWRpcy1wYXNzd29yZA==
  encryption-key: YWVzLTI1Ni1nY20tZW5jcnlwdGlvbi1rZXk=
  jwt-secret: and0LXNlY3JldC1mb3ItYXV0aGVudGljYXRpb24=